<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="description" content="Zen Focus: ì „ ì„¸ê³„ ìœ ì €ë¥¼ ìœ„í•œ ë¯¸ë‹ˆë©€ ë°±ìƒ‰ì†ŒìŒ íƒ€ì´ë¨¸ì™€ íˆ¬ë‘ë¦¬ìŠ¤íŠ¸. Minimalist white noise timer and todo list for global users.">
    <meta name="theme-color" content="#0f172a">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3239/3239147.png">
    <title>Zen Focus | ì§‘ì¤‘ì„ ìœ„í•œ ê³µê°„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
            -webkit-tap-highlight-color: transparent;
        }
        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .celebration-glass {
            background: linear-gradient(135deg, rgba(56, 189, 248, 0.2), rgba(168, 85, 247, 0.2));
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1);
        }
        @keyframes bounce-in {
            0% { transform: translate(-50%, 20px) scale(0.9); opacity: 0; }
            50% { transform: translate(-50%, -10px) scale(1.05); opacity: 1; }
            100% { transform: translate(-50%, 0) scale(1); opacity: 1; }
        }
        .animate-celebrate {
            animation: bounce-in 0.6s cubic-bezier(0.17, 0.67, 0.83, 0.67) forwards;
        }
        .ad-placeholder {
            background: rgba(30, 41, 59, 0.3);
            border: 1px dashed rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.1);
            font-size: 9px;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            border-radius: 1rem;
        }
        input::placeholder { color: rgba(255, 255, 255, 0.3); }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
        
        /* Smooth scrolling for mobile keyboard */
        html { scroll-behavior: smooth; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-6 md:p-8">

    <!-- Google AdSense Global Script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1337800001968718"
     crossorigin="anonymous"></script>

    <!-- Language Toggle (Bottom Right) -->
    <div class="fixed bottom-6 right-6 md:bottom-8 md:right-8 z-50">
        <button id="lang-toggle" class="glass px-5 py-3 md:px-4 md:py-2 rounded-full text-[11px] md:text-[10px] tracking-[0.2em] text-slate-500 hover:text-slate-200 transition-all uppercase font-light border border-slate-800/50 hover:border-slate-700 shadow-xl">
            <span id="lang-ko" class="transition-all">KO</span>
            <span class="mx-2 text-slate-800">/</span>
            <span id="lang-en" class="transition-all">EN</span>
        </button>
    </div>

    <div class="max-w-5xl w-full flex flex-col items-center gap-10 md:gap-12 my-8 md:my-12">
        <header class="text-center space-y-5">
            <h1 class="text-3xl md:text-4xl font-extralight tracking-[0.3em] text-slate-100 uppercase">Zen Focus</h1>
            <div id="stats-display" class="text-[10px] md:text-xs text-slate-500 tracking-widest uppercase bg-slate-800/30 py-2.5 px-5 rounded-full inline-block">
                <span data-i18n="todayFocus">ì˜¤ëŠ˜ ë‚˜ì˜ ì§‘ì¤‘:</span> <span id="focus-minutes" class="text-slate-300 font-semibold">0</span><span data-i18n="minUnit">ë¶„</span>
            </div>
        </header>

        <!-- Quote & Tip Area -->
        <div class="w-full max-w-2xl glass py-4 px-6 rounded-2xl text-center flex items-center justify-center gap-3 group border-slate-800/30 hover:border-slate-700 transition-all duration-500 overflow-hidden" id="quote-area">
            <span class="text-[9px] text-slate-500 uppercase tracking-widest font-semibold border border-slate-700 px-2 py-0.5 rounded-md group-hover:text-slate-300 transition-colors">TIP & QUOTE</span>
            <p id="focus-tip-text" class="text-xs md:text-sm font-light text-slate-400 group-hover:text-slate-200 transition-colors truncate italic"></p>
        </div>

        <div class="w-full flex flex-col lg:flex-row gap-8 items-start justify-center">
            
            <main class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-10 items-start max-w-4xl w-full">
                <!-- Timer Section -->
                <section class="glass p-8 md:p-10 rounded-[2rem] md:rounded-[2.5rem] shadow-2xl text-center space-y-8 md:space-y-10 order-1">
                    <div class="space-y-3">
                        <div id="timer-display" class="text-7xl md:text-8xl font-thin tracking-tighter text-slate-100 transition-all duration-500">25:00</div>
                        <div id="timer-label" data-i18n="focusMode" class="text-[10px] text-slate-500 uppercase tracking-[0.4em]">Focus Mode</div>
                    </div>

                    <div class="flex items-center justify-center gap-4 py-2">
                        <input type="number" id="minutes-input" value="25" min="1" max="999" 
                            class="w-20 md:w-24 bg-transparent border-b border-slate-700 text-center text-3xl font-light focus:outline-none focus:border-slate-400 transition-colors py-2">
                        <span data-i18n="minUnitLabel" class="text-slate-500 font-light">min</span>
                    </div>

                    <div class="flex flex-col gap-4">
                        <button id="start-btn" data-i18n="start" class="w-full bg-slate-100 text-slate-900 font-medium py-5 md:py-5 rounded-2xl hover:bg-white transition-all active:scale-[0.96] tracking-widest text-sm uppercase shadow-lg">START</button>
                        <button id="reset-btn" data-i18n="reset" class="w-full bg-transparent text-slate-500 hover:text-slate-300 py-3 rounded-2xl transition-all text-[10px] tracking-widest uppercase active:scale-95">RESET TIMER</button>
                    </div>

                    <div class="pt-8 border-t border-slate-800/50 space-y-6">
                        <div class="flex flex-col gap-3">
                            <div class="flex items-center justify-between">
                                <span data-i18n="volume" class="text-[10px] text-slate-500 uppercase tracking-widest">Volume</span>
                            </div>
                            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.3" 
                                class="w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-slate-400">
                        </div>
                        <div class="flex items-center justify-between">
                            <span data-i18n="soundscape" class="text-[10px] text-slate-500 uppercase tracking-widest">Soundscape</span>
                            <select id="sound-select" class="bg-transparent text-xs text-slate-400 focus:outline-none cursor-pointer text-right hover:text-slate-200 transition-colors py-1">
                                <option value="assets/rain.mp3" data-i18n="soundRain">Soft Rain</option>
                                <option value="assets/Ambience.mp3" data-i18n="soundForest">Deep Forest</option>
                                <option value="assets/Campfire.mp3" data-i18n="soundCampfire">Crackling Campfire</option>
                                <option value="assets/Ocean Waves.mp3" data-i18n="soundOcean">Gentle Ocean</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- Tasks Section -->
                <section class="glass p-8 md:p-8 rounded-[2rem] md:rounded-[2.5rem] shadow-xl space-y-6 order-2 flex flex-col">
                    <div class="flex items-center justify-between px-2">
                        <h2 data-i18n="rituals" class="text-[10px] font-semibold text-slate-500 uppercase tracking-[0.3em]">Daily Rituals</h2>
                        <button id="clear-completed-btn" data-i18n="clearCompleted" class="text-[9px] text-slate-600 hover:text-red-400 transition-colors uppercase tracking-widest py-2">Clear Completed</button>
                    </div>
                    
                    <div class="relative group">
                        <input type="text" id="todo-input" data-i18n-placeholder="todoPlaceholder" placeholder="ì˜¤ëŠ˜ì˜ ëª°ì…ì„ ê¸°ë¡í•˜ì„¸ìš”..." 
                            class="w-full bg-slate-800/20 border border-slate-800/50 rounded-2xl pl-5 pr-14 py-4.5 md:py-4 focus:outline-none focus:border-slate-600 transition-all text-sm placeholder:text-slate-600 h-14">
                        <button id="add-todo-btn" class="absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-slate-800 rounded-xl flex items-center justify-center hover:bg-slate-700 transition-colors text-slate-400">+</button>
                    </div>

                    <ul id="todo-list" class="space-y-4 max-h-[340px] md:max-h-[340px] overflow-y-auto pr-1 custom-scrollbar flex-1"></ul>

                    <!-- Bottom Ad Slot (ad-slot-1) -->
                    <div class="mt-4 ad-placeholder h-20 w-full" id="ad-slot-1">
                        <!-- AdSense Code Here -->
                        ADVERTISEMENT
                    </div>
                </section>
            </main>

            <!-- Sidebar Ad Slot (ad-slot-2) -->
            <aside class="hidden lg:flex flex-col gap-6">
                <div class="ad-placeholder w-[160px] h-[600px]" id="ad-slot-2">
                    <!-- AdSense Code Here -->
                    ADVERTISEMENT
                </div>
            </aside>
        </div>

        <!-- Informational Content Section -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl mx-auto pt-6">
            <article class="glass p-8 rounded-[2rem] space-y-4 border-slate-800/40">
                <h2 data-i18n="infoTitle1" class="text-lg font-light text-slate-100 tracking-wider uppercase">The Science of White Noise</h2>
                <p data-i18n="infoText1" class="text-xs md:text-sm text-slate-400 leading-relaxed font-light">
                    ë°±ìƒ‰ì†ŒìŒì€ ì¼ì •í•œ ì£¼íŒŒìˆ˜ ë²”ìœ„ë¥¼ ê°€ì§„ ì†Œë¦¬ë¡œ, ì£¼ë³€ì˜ ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì†ŒìŒì„ ë®ì–´ì£¼ëŠ” 'ë§ˆìŠ¤í‚¹ íš¨ê³¼'ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‡Œì˜ ê°ì„± ìƒíƒœë¥¼ ì•ˆì •ì‹œí‚¤ê³  ì§‘ì¤‘ë ¥ì„ ìœ ì§€í•˜ëŠ” ë° í° ë„ì›€ì„ ì¤ë‹ˆë‹¤.
                </p>
            </article>
            <article class="glass p-8 rounded-[2rem] space-y-4 border-slate-800/40">
                <h2 data-i18n="infoTitle2" class="text-lg font-light text-slate-100 tracking-wider uppercase">The Pomodoro Technique Guide</h2>
                <p data-i18n="infoText2" class="text-xs md:text-sm text-slate-400 leading-relaxed font-light">
                    ë½€ëª¨ë„ë¡œ ê¸°ë²•ì€ 25ë¶„ ì§‘ì¤‘ê³¼ 5ë¶„ íœ´ì‹ì„ ë°˜ë³µí•˜ëŠ” ì‹œê°„ ê´€ë¦¬ ë°©ë²•ì…ë‹ˆë‹¤. ì§§ì€ íœ´ì‹ì€ ë‡Œì˜ í”¼ë¡œë¥¼ ë°©ì§€í•˜ê³ , ì •í•´ì§„ ì‹œê°„ ë™ì•ˆì˜ ëª°ì…ì€ ì—…ë¬´ íš¨ìœ¨ì„ ê·¹ëŒ€í™”í•˜ì—¬ ë²ˆì•„ì›ƒì„ ì˜ˆë°©í•©ë‹ˆë‹¤.
                </p>
            </article>
        </section>

        <footer class="text-center text-slate-700 text-[9px] tracking-[0.2em] space-y-4 pt-8 pb-12 md:pb-0">
            <div class="uppercase">&copy; 2024 Zen Focus. <span data-i18n="footerSub">Minimalist Flow Tool.</span></div>
            <div class="opacity-40 italic leading-loose px-4 md:px-0" data-i18n="footerAttribution">ë³¸ ì„œë¹„ìŠ¤ì˜ ìŒì›ì€ ê³µìœ ë§ˆë‹¹ì˜ ììœ ì´ìš© ì €ì‘ë¬¼ì„ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.</div>
            <div class="pt-2 flex justify-center gap-6 opacity-50">
                <button onclick="openModal('privacy')" class="uppercase border-b border-transparent hover:border-slate-500 hover:text-slate-300 transition-all pb-0.5">Privacy Policy</button>
                <button onclick="openModal('contact')" class="uppercase border-b border-transparent hover:border-slate-500 hover:text-slate-300 transition-all pb-0.5">Contact</button>
            </div>
        </footer>
    </div>

    <!-- Info Modal -->
    <div id="info-modal" class="fixed inset-0 z-[100] flex items-center justify-center p-6 opacity-0 pointer-events-none transition-all duration-500">
        <div class="absolute inset-0 bg-slate-950/60 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="glass max-w-lg w-full max-h-[80vh] overflow-y-auto p-8 md:p-10 rounded-[2.5rem] relative shadow-2xl custom-scrollbar">
            <button onclick="closeModal()" class="absolute top-6 right-8 text-2xl text-slate-500 hover:text-slate-200 transition-colors">&times;</button>
            <div id="modal-content" class="space-y-6 text-sm font-light leading-relaxed text-slate-300">
                <!-- Content injected via JS -->
            </div>
        </div>
    </div>

    <!-- Notification Popup -->
    <div id="finish-popup" class="fixed bottom-10 left-1/2 -translate-x-1/2 celebration-glass px-10 py-5 rounded-[2rem] shadow-2xl transform translate-y-32 opacity-0 transition-all duration-700 flex flex-col items-center gap-2 z-50 text-center min-w-[280px]">
        <div class="text-3xl mb-1">ğŸ‰</div>
        <p id="popup-text" class="text-base text-slate-100 font-medium tracking-tight" data-i18n="popupMessage">ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤! ì ì‹œ íœ´ì‹í•˜ì„¸ìš”. âœ¨</p>
        <div class="text-[10px] text-slate-400 uppercase tracking-widest mt-1 opacity-70">Focus Session Completed</div>
    </div>

    <audio id="bg-audio" loop preload="auto"></audio>

    <!-- Build Trigger: Updated with zen-focus rename 2026-02-23 -->
    <script>
        const LANG_PACKAGE = {
            ko: {
                todayFocus: "ì˜¤ëŠ˜ ë‚˜ì˜ ì§‘ì¤‘: ",
                minUnit: "ë¶„",
                minUnitLabel: "min",
                focusMode: "Focus Mode",
                start: "START",
                pause: "PAUSE",
                resume: "RESUME",
                reset: "RESET TIMER",
                volume: "Volume",
                soundscape: "Soundscape",
                soundRain: "Soft Rain",
                soundForest: "Deep Forest",
                soundCampfire: "Crackling Campfire",
                soundOcean: "Gentle Ocean",
                rituals: "Daily Rituals",
                clearCompleted: "Clear Completed",
                todoPlaceholder: "ì˜¤ëŠ˜ì˜ ëª°ì…ì„ ê¸°ë¡í•˜ì„¸ìš”...",
                footerSub: "Minimalist Flow Tool.",
                footerAttribution: "ë³¸ ì„œë¹„ìŠ¤ì˜ ìŒì›ì€ ê³µìœ ë§ˆë‹¹ì˜ ììœ ì´ìš© ì €ì‘ë¬¼ì„ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.",
                popupMessage: "ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤! ì ì‹œ íœ´ì‹í•˜ì„¸ìš”. âœ¨",
                notificationBody: "ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤! ì ì‹œ íœ´ì‹í•˜ì„¸ìš”.",
                infoTitle1: "ë°±ìƒ‰ì†ŒìŒì˜ ê³¼í•™ì  íš¨ê³¼",
                infoText1: "ë°±ìƒ‰ì†ŒìŒ(White Noise)ì€ ëª¨ë“  ì£¼íŒŒìˆ˜ ëŒ€ì—­ì—ì„œ ì¼ì •í•œ ì—ë„ˆì§€ë¥¼ ê°€ì§„ ì†Œë¦¬ë¡œ, ì£¼ë³€ì˜ ë¶ˆí•„ìš”í•œ ì†ŒìŒì„ ì°¨ë‹¨í•˜ëŠ” 'ë§ˆìŠ¤í‚¹ íš¨ê³¼'ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì—°êµ¬ì— ë”°ë¥´ë©´ ì¼ì •í•œ ë°°ê²½ ì†ŒìŒì€ ë‡Œì˜ ì•ŒíŒŒíŒŒë¥¼ ìê·¹í•˜ì—¬ ì‹¬ë¦¬ì  ì•ˆì •ê°ì„ ì£¼ê³  ê¹Šì€ ëª°ì… ìƒíƒœë¡œ ìœ ë„í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.",
                infoTitle2: "ë½€ëª¨ë„ë¡œ ê¸°ë²• ì‚¬ìš© ì„¤ëª…ì„œ",
                infoText2: "ë½€ëª¨ë„ë¡œ(Pomodoro) ê¸°ë²•ì€ 25ë¶„ê°„ì˜ ê°•ë„ ë†’ì€ ì§‘ì¤‘ê³¼ 5ë¶„ê°„ì˜ ì§§ì€ íœ´ì‹ì„ ë°˜ë³µí•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ì¸ê°„ì˜ ì§‘ì¤‘ë ¥ í•œê³„ë¥¼ ê³ ë ¤í•œ ì´ ë¦¬ë“¬ì€ ë‡Œì˜ í”¼ë¡œë¥¼ ë°©ì§€í•˜ê³  ì‹œê°„ ì‚¬ìš©ì˜ íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤. Zen Focus íƒ€ì´ë¨¸ë¥¼ í™œìš©í•´ ë‹¹ì‹ ë§Œì˜ ì™„ë²½í•œ ëª°ì… ë£¨í‹´ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”."
            },
            en: {
                todayFocus: "Today's Focus: ",
                minUnit: " min",
                minUnitLabel: "min",
                focusMode: "Focus Mode",
                start: "START",
                pause: "PAUSE",
                resume: "RESUME",
                reset: "RESET TIMER",
                volume: "Volume",
                soundscape: "Soundscape",
                soundRain: "Soft Rain",
                soundForest: "Deep Forest",
                soundCampfire: "Crackling Campfire",
                soundOcean: "Gentle Ocean",
                rituals: "Daily Rituals",
                clearCompleted: "Clear Completed",
                todoPlaceholder: "Record today's flow...",
                footerSub: "Minimalist Flow Tool.",
                footerAttribution: "Audio assets provided by Gong-yu Madang (Open License).",
                popupMessage: "Well done! Take a break. âœ¨",
                notificationBody: "Well done! Take a break.",
                infoTitle1: "The Science of White Noise",
                infoText1: "White noise is a sound that contains every frequency at a consistent intensity, providing a 'masking effect' that blocks distracting background noise. Research suggests that a steady stream of ambient sound can stimulate alpha waves in the brain, promoting psychological stability and facilitating deep focus.",
                infoTitle2: "Pomodoro Technique Guide",
                infoText2: "The Pomodoro Technique is a time management method that involves 25 minutes of intense focus followed by a 5-minute break. This rhythm, designed around human attention spans, prevents mental fatigue and maximizes productivity. Use Zen Focus to build your own perfect flow routine."
            }
        };

        const timerDisplay = document.getElementById('timer-display');
        const minutesInput = document.getElementById('minutes-input');
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const soundSelect = document.getElementById('sound-select');
        const volumeSlider = document.getElementById('volume-slider');
        const bgAudio = document.getElementById('bg-audio');
        const todoInput = document.getElementById('todo-input');
        const addTodoBtn = document.getElementById('add-todo-btn');
        const todoList = document.getElementById('todo-list');
        const clearCompletedBtn = document.getElementById('clear-completed-btn');
        const focusMinutesDisplay = document.getElementById('focus-minutes');
        const finishPopup = document.getElementById('finish-popup');
        const langToggle = document.getElementById('lang-toggle');
        const infoModal = document.getElementById('info-modal');
        const modalContent = document.getElementById('modal-content');
        const focusTipText = document.getElementById('focus-tip-text');

        // Focus Tips & Quotes Data
        const FOCUS_TIPS = {
            ko: [
                "íœ´ëŒ€í°ì„ ë‹¤ë¥¸ ë°©ì— ë‘ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ì§‘ì¤‘ë ¥ì´ ì˜¬ë¼ê°‘ë‹ˆë‹¤.",
                "ë½€ëª¨ë„ë¡œ ê¸°ë²•(25ë¶„ ì§‘ì¤‘, 5ë¶„ íœ´ì‹)ì„ ì‚¬ìš©í•´ ë³´ì„¸ìš”.",
                "ì£¼ë³€ì„ ì •ë¦¬í•˜ë©´ ë‡Œì˜ ì¸ì§€ ë¶€í•˜ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.",
                "ë©€í‹°íƒœìŠ¤í‚¹ì€ ì§‘ì¤‘ë ¥ì˜ ê°€ì¥ í° ì ì…ë‹ˆë‹¤.",
                "ì‹¬í˜¸í¡ 3ë²ˆìœ¼ë¡œ ëª°ì…ì„ ì‹œì‘í•´ ë³´ì„¸ìš”.",
                "\"ì„±ê³µì€ ë‹¹ì‹ ì´ ì–¼ë§ˆë‚˜ ì§‘ì¤‘í•  ìˆ˜ ìˆëŠëƒì— ë‹¬ë ¤ ìˆë‹¤.\"",
                "\"ì§‘ì¤‘ë ¥ì€ ì§€ëŠ¥ë³´ë‹¤ ë” ê°•ë ¥í•œ ë¬´ê¸°ì´ë‹¤.\"",
                "\"ë‹¹ì‹ ì˜ ë§ˆìŒì´ ë¨¸ë¬´ëŠ” ê³³ì— ë‹¹ì‹ ì˜ ì—ë„ˆì§€ê°€ íë¥¸ë‹¤.\"",
                "\"ëª°ì…ì€ í–‰ë³µìœ¼ë¡œ ê°€ëŠ” ê°€ì¥ ë¹ ë¥¸ ê¸¸ì…ë‹ˆë‹¤.\"",
                "\"ì‘ì€ ì¼ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ìœ„ëŒ€í•œ ì¼ì„ ì´ë£¨ëŠ” ì‹œì‘ì´ë‹¤.\"",
                "í•œ ë²ˆì— ì˜¤ì§ í•œ ê°€ì§€ ì¼ì—ë§Œ ëª°ì…í•˜ì„¸ìš”.",
                "ì ê¹ì˜ ìŠ¤íŠ¸ë ˆì¹­ì€ ë‡Œì— ì‚°ì†Œë¥¼ ê³µê¸‰í•´ ì¤ë‹ˆë‹¤."
            ],
            en: [
                "Keeping your phone in another room boosts concentration.",
                "Try the Pomodoro technique (25m focus, 5m rest).",
                "Decluttering your space reduces cognitive load on the brain.",
                "Multitasking is the biggest enemy of deep focus.",
                "Start your flow with three deep breaths.",
                "\"Success is the result of your ability to focus.\"",
                "\"Focus is a more powerful weapon than intelligence.\"",
                "\"Where your mind goes, your energy flows.\"",
                "\"Flow is the fastest path to happiness.\"",
                "\"Focusing on small tasks is the start of achieving greatness.\"",
                "Immerse yourself in only one task at a time.",
                "Short stretching supplies oxygen to your brain."
            ]
        };

        let currentTipIndex = Math.floor(Math.random() * FOCUS_TIPS.ko.length);

        function updateFocusTip() {
            focusTipText.textContent = FOCUS_TIPS[currentLang][currentTipIndex];
        }

        // Modal Content Data
        const modalData = {
            privacy: {
                ko: `<h3 class="text-lg text-slate-100 uppercase tracking-widest font-normal border-b border-slate-800 pb-4">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</h3>
                     <div class="space-y-4 py-2">
                        <section>
                            <h4 class="text-slate-200 font-medium mb-1">1. ë°ì´í„° ìˆ˜ì§‘ ë° ì €ì¥</h4>
                            <p>Zen FocusëŠ” ì„œë²„ì— ì–´ë– í•œ ê°œì¸ì •ë³´ë„ ìˆ˜ì§‘í•˜ê±°ë‚˜ ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ ë°ì´í„°(í•  ì¼ ëª©ë¡, í†µê³„ ë“±)ëŠ” ë¸Œë¼ìš°ì €ì˜ <span class="text-slate-100">ë¡œì»¬ ìŠ¤í† ë¦¬ì§€(Local Storage)</span>ì—ë§Œ ì €ì¥ë˜ì–´ ì‚¬ìš©ìì˜ ê¸°ê¸°ë¥¼ ë– ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
                        </section>
                        <section>
                            <h4 class="text-slate-200 font-medium mb-1">2. ì¿ í‚¤ ë° ê´‘ê³  ì„œë¹„ìŠ¤</h4>
                            <p>Google AdSenseë¥¼ í¬í•¨í•œ ì œ3ì ì œê³µì—…ì²´ëŠ” ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ì´ì „ ë°©ë¬¸ ê¸°ë¡ì„ ë°”íƒ•ìœ¼ë¡œ ë§ì¶¤í˜• ê´‘ê³ ë¥¼ ì œê³µí•©ë‹ˆë‹¤. êµ¬ê¸€ì˜ ê´‘ê³  ì¿ í‚¤ ì‚¬ìš©ì„ í†µí•´ ì‚¬ìš©ìê°€ ë³¸ ì‚¬ì´íŠ¸ ë° ë‹¤ë¥¸ ì‚¬ì´íŠ¸ë¥¼ ë°©ë¬¸í•  ë•Œ ì ì ˆí•œ ê´‘ê³ ë¥¼ ê²Œì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        </section>
                        <section>
                            <h4 class="text-slate-200 font-medium mb-1">3. ì‚¬ìš©ì ì„ íƒê¶Œ</h4>
                            <p>ì‚¬ìš©ìëŠ” <a href="https://www.google.com/settings/ads" target="_blank" class="text-blue-400 underline">êµ¬ê¸€ ê´‘ê³  ì„¤ì •</a> í˜ì´ì§€ë¥¼ í†µí•´ ë§ì¶¤í˜• ê´‘ê³ ë¥¼ í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ë¸Œë¼ìš°ì € ì„¤ì •ì„ í†µí•´ ëª¨ë“  ì¿ í‚¤ë¥¼ ê±°ë¶€í•˜ê±°ë‚˜ ë¡œì»¬ ë°ì´í„°ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        </section>
                     </div>`,
                en: `<h3 class="text-lg text-slate-100 uppercase tracking-widest font-normal border-b border-slate-800 pb-4">Privacy Policy</h3>
                     <div class="space-y-4 py-2">
                        <section>
                            <h4 class="text-slate-200 font-medium mb-1">1. Data Collection & Storage</h4>
                            <p>Zen Focus does not collect or store any personal data on servers. All service data (todos, stats, etc.) is stored exclusively in your browser's <span class="text-slate-100">Local Storage</span>, meaning it never leaves your device.</p>
                        </section>
                        <section>
                            <h4 class="text-slate-200 font-medium mb-1">2. Cookies & Advertising</h4>
                            <p>Third-party vendors, including Google, use cookies to serve ads based on a user's prior visits to this website or other websites. Google's use of advertising cookies enables it and its partners to serve ads to users based on their visit to your sites and/or other sites on the Internet.</p>
                        </section>
                        <section>
                            <h4 class="text-slate-200 font-medium mb-1">3. User Choices</h4>
                            <p>Users may opt out of personalized advertising by visiting <a href="https://www.google.com/settings/ads" target="_blank" class="text-blue-400 underline">Ads Settings</a>. You can also manage or delete cookies and local storage data via your browser settings.</p>
                        </section>
                     </div>`
            },
            contact: {
                ko: `<h3 class="text-lg text-slate-100 uppercase tracking-widest font-normal border-b border-slate-800 pb-4">ë¬¸ì˜í•˜ê¸°</h3>
                     <p>ì„œë¹„ìŠ¤ ì´ìš© ì¤‘ ë¶ˆí¸í•œ ì ì´ë‚˜ ì œì•ˆ ì‚¬í•­ì´ ìˆë‹¤ë©´ ì•„ë˜ ì´ë©”ì¼ë¡œ ì—°ë½ì£¼ì„¸ìš”.</p>
                     <p class="text-slate-100 font-medium">Email: setmakegame@gmail.com</p>
                     <p class="text-[10px] text-slate-500 mt-4 italic">ìµœëŒ€í•œ ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ë‹µë³€ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>`,
                en: `<h3 class="text-lg text-slate-100 uppercase tracking-widest font-normal border-b border-slate-800 pb-4">Contact</h3>
                     <p>If you have any feedback or inquiries, please feel free to reach out via email.</p>
                     <p class="text-slate-100 font-medium">Email: setmakegame@gmail.com</p>
                     <p class="text-[10px] text-slate-500 mt-4 italic">We will get back to you as soon as possible.</p>`
            }
        };

        window.openModal = (type) => {
            modalContent.innerHTML = modalData[type][currentLang];
            infoModal.classList.remove('opacity-0', 'pointer-events-none');
            document.body.style.overflow = 'hidden';
        };

        window.closeModal = () => {
            infoModal.classList.add('opacity-0', 'pointer-events-none');
            document.body.style.overflow = '';
        };

        // Language Logic
        let currentLang = localStorage.getItem('zen-lang') || 
            (window.navigator.language.startsWith('ko') ? 'ko' : 'en');

        function applyTranslations() {
            const t = LANG_PACKAGE[currentLang];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) el.textContent = t[key];
            });
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (t[key]) el.placeholder = t[key];
            });
            
            // Update buttons state
            if (isRunning) {
                startBtn.textContent = t.pause;
            } else if (timeLeft < originalTime) {
                startBtn.textContent = t.resume;
            } else {
                startBtn.textContent = t.start;
            }

            // Update toggle visual
            document.getElementById('lang-ko').classList.toggle('text-slate-100', currentLang === 'ko');
            document.getElementById('lang-ko').classList.toggle('font-medium', currentLang === 'ko');
            document.getElementById('lang-en').classList.toggle('text-slate-100', currentLang === 'en');
            document.getElementById('lang-en').classList.toggle('font-medium', currentLang === 'en');
        }

        langToggle.onclick = () => {
            currentLang = currentLang === 'ko' ? 'en' : 'ko';
            localStorage.setItem('zen-lang', currentLang);
            applyTranslations();
            updateFocusTip();
            renderTodos();
        };

        // Stats Logic
        let totalFocusMinutes = parseInt(localStorage.getItem('zen-focus-total')) || 0;
        function updateStats(mins) {
            totalFocusMinutes += mins;
            localStorage.setItem('zen-focus-total', totalFocusMinutes);
            focusMinutesDisplay.textContent = totalFocusMinutes;
        }
        focusMinutesDisplay.textContent = totalFocusMinutes;

        // Notification Logic
        function showNotification() {
            finishPopup.classList.remove('translate-y-32', 'opacity-0');
            finishPopup.classList.add('animate-celebrate');
            
            setTimeout(() => {
                finishPopup.classList.add('translate-y-32', 'opacity-0');
                finishPopup.classList.remove('animate-celebrate');
            }, 6000);
            
            if (Notification.permission === "granted") {
                new Notification("Zen Focus", { 
                    body: LANG_PACKAGE[currentLang].notificationBody, 
                    icon: "https://cdn-icons-png.flaticon.com/512/3239/3239147.png" 
                });
            } else if (Notification.permission !== "denied") {
                Notification.requestPermission();
            }
        }

        // Confetti Celebration
        function fireConfetti() {
            const duration = 3 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                const particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }

        // ì´ˆê¸° ë³¼ë¥¨ ì„¤ì •
        bgAudio.volume = 0.3;

        let timeLeft = 25 * 60;
        let originalTime = 25 * 60;
        let timerInterval = null;
        let isRunning = false;

        function updateDisplay() {
            const m = Math.floor(timeLeft / 60);
            const s = timeLeft % 60;
            const timeStr = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            timerDisplay.textContent = timeStr;
            
            if (isRunning) {
                document.title = `(${timeStr}) Zen Focus`;
            } else {
                document.title = `Zen Focus`;
            }
        }

        async function playAudio() {
            try {
                if (bgAudio.src !== window.location.origin + '/' + soundSelect.value && !bgAudio.src.endsWith(soundSelect.value)) {
                    bgAudio.src = soundSelect.value;
                    bgAudio.load();
                }
                await bgAudio.play();
            } catch (e) {
                console.error("Audio error:", e);
            }
        }

        function startTimer() {
            if (isRunning) {
                pauseTimer();
                return;
            }

            isRunning = true;
            originalTime = minutesInput.value * 60;
            startBtn.textContent = LANG_PACKAGE[currentLang].pause;
            startBtn.classList.replace('bg-slate-100', 'bg-slate-800');
            startBtn.classList.replace('text-slate-900', 'text-slate-100');
            
            playAudio();

            timerInterval = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    updateDisplay();
                } else {
                    const completedMins = Math.floor(originalTime / 60);
                    updateStats(completedMins);
                    stopTimer(true);
                }
            }, 1000);
        }

        function pauseTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            startBtn.textContent = LANG_PACKAGE[currentLang].resume;
            startBtn.classList.replace('bg-slate-800', 'bg-slate-100');
            startBtn.classList.replace('text-slate-100', 'text-slate-900');
            bgAudio.pause();
            updateDisplay();
        }

        function stopTimer(finished = false) {
            isRunning = false;
            clearInterval(timerInterval);
            bgAudio.pause();
            updateDisplay();
            
            if (finished) {
                fireConfetti();
                showNotification();
                resetTimer();
            }
        }

        function resetTimer() {
            stopTimer();
            timeLeft = minutesInput.value * 60;
            updateDisplay();
            startBtn.textContent = LANG_PACKAGE[currentLang].start;
            startBtn.classList.remove('bg-slate-800', 'text-slate-100');
            startBtn.classList.add('bg-slate-100', 'text-slate-900');
        }

        // Todo Logic
        let todos = JSON.parse(localStorage.getItem('zen-todos')) || [];
        function saveTodos() { localStorage.setItem('zen-todos', JSON.stringify(todos)); }
        function renderTodos() {
            todoList.innerHTML = '';
            const sortedTodos = [...todos].sort((a, b) => a.completed - b.completed);
            
            sortedTodos.forEach((todo, index) => {
                const originalIndex = todos.indexOf(todo);
                const li = document.createElement('li');
                li.className = `flex items-center justify-between p-4.5 md:p-4 rounded-2xl bg-slate-800/10 border border-slate-800/30 group hover:border-slate-700 transition-all ${todo.completed ? 'opacity-60' : ''}`;
                li.innerHTML = `
                    <div class="flex items-center gap-4 flex-1 cursor-pointer py-1" onclick="toggleTodo(${originalIndex})">
                        <div class="w-6 h-6 md:w-5 md:h-5 rounded-full border border-slate-600 flex items-center justify-center transition-all ${todo.completed ? 'bg-slate-400 border-slate-400' : 'group-hover:border-slate-400'}">
                            ${todo.completed ? '<svg class="w-3.5 h-3.5 md:w-3 md:h-3 text-slate-900" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>' : ''}
                        </div>
                        <span class="text-[15px] md:text-sm font-light transition-all ${todo.completed ? 'line-through text-slate-500' : 'text-slate-300'}">${todo.text}</span>
                    </div>
                    <button onclick="removeTodo(${originalIndex})" class="text-slate-700 hover:text-red-400 opacity-100 md:opacity-0 group-hover:opacity-100 transition-all px-3 py-2 text-xl md:text-base leading-none">&times;</button>
                `;
                todoList.appendChild(li);
            });
        }

        window.toggleTodo = (index) => { todos[index].completed = !todos[index].completed; saveTodos(); renderTodos(); };
        window.removeTodo = (index) => { todos = todos.filter((_, i) => i !== index); saveTodos(); renderTodos(); };
        
        clearCompletedBtn.onclick = () => {
            todos = todos.filter(t => !t.completed);
            saveTodos();
            renderTodos();
        };

        addTodoBtn.onclick = () => {
            const text = todoInput.value.trim();
            if (text) { todos.push({ text, completed: false }); todoInput.value = ''; saveTodos(); renderTodos(); }
        };
        todoInput.onkeypress = (e) => { if (e.key === 'Enter') addTodoBtn.click(); };

        minutesInput.onchange = () => { if (!isRunning) { timeLeft = minutesInput.value * 60; updateDisplay(); } };
        startBtn.onclick = startTimer;
        resetBtn.onclick = resetTimer;
        soundSelect.onchange = () => { if (isRunning) { playAudio(); } };
        volumeSlider.oninput = (e) => { bgAudio.volume = e.target.value; };

        // Request Notification Permission
        if (Notification.permission === "default") {
            Notification.requestPermission();
        }

        applyTranslations();
        updateFocusTip();
        renderTodos();
        updateDisplay();

        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('SW registered'))
                    .catch(err => console.log('SW error', err));
            });
        }
    </script>
</body>
</html>
